<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>BEIN Web Player</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<style>
html, body { margin:0; padding:0; width:100%; height:100%; background:black; }
video { width:100%; height:100%; background:black; }
#loading {
    position:absolute; inset:0; display:flex; justify-content:center; align-items:center;
    color:#fff; font-size:18px; background:rgba(0,0,0,0.7); z-index:10;
}
#controls {
    position:absolute; bottom:10px; left:50%; transform:translateX(-50%);
    color:#fff; font-size:16px; z-index:20; background:rgba(0,0,0,0.5); padding:5px 10px;
    border-radius:5px;
}
</style>
</head>
<body>

<div id="loading">جاري تحميل البث...</div>
<video id="player" controls autoplay playsinline></video>
<div id="controls">BEIN SPORTS 1</div>

<script>
// رابط Proxy جاهز للبث
const STREAM_URL = "https://m3u8.ppopculture.workers.dev/m3u8-proxy?url=https://v5on.site/api/playlist.php?id=146116&referer=http://v5on.site/&headers={\"User-Agent\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64)\"}";

const video = document.getElementById("player");
const loading = document.getElementById("loading");

function playStream() {
    if(Hls.isSupported()){
        const hls = new Hls({enableWorker:true, maxBufferLength:20});
        hls.loadSource(STREAM_URL);
        hls.attachMedia(video);

        hls.on(Hls.Events.MANIFEST_PARSED, () => {
            video.play();
            loading.style.display = "none";
        });

        hls.on(Hls.Events.ERROR, () => {
            console.warn("حدث خطأ، إعادة التحميل...");
            setTimeout(playStream, 1500);
        });

    } else {
        video.src = STREAM_URL;
        video.play();
        loading.style.display = "none";
    }
}

// إعادة التشغيل عند توقف الفيديو مؤقتًا
video.addEventListener("error", () => setTimeout(playStream,1500));
video.addEventListener("stalled", () => setTimeout(playStream,1500));

// بدء البث
playStream();
</script>

</body>
</html>
