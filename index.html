<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>My IPTV Player</title>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<style>
body{background:#000;color:#fff;text-align:center}
video{width:100%;max-height:90vh}
</style>
</head>
<body>

<h3 id="title"></h3>
<video id="video" controls autoplay></video>

<script type="module">
import { STREAM_TEXT } from './stream.js'
import { parseStream } from './parser.js'

const ch = parseStream(STREAM_TEXT)
document.getElementById('title').textContent = ch.title

const video = document.getElementById('video')

const hls = new Hls({
  xhrSetup: xhr => {
    if (ch.referrer) xhr.setRequestHeader('Referer', ch.referrer)
    if (ch.userAgent) xhr.setRequestHeader('User-Agent', ch.userAgent)
  }
})

hls.loadSource(ch.url)
hls.attachMedia(video)
</script>

</body>
</html>
